import{c as f,r as l,d as e,m as y,I as E,n as N,C as b,U as v,e as w}from"./index-DpaXIdRB.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],S=f("arrow-up-down",_),A=()=>{const[m,i]=l.useState([]),[u,c]=l.useState(!0),[n,p]=l.useState(""),[o,x]=l.useState("desc"),g=async()=>{c(!0);try{const t=await w("/audits");i(t)}catch(t){console.error(t)}finally{c(!1)}};l.useEffect(()=>{g()},[]);const d=[...m.filter(t=>{var s,r;const a=n.toLowerCase();return((s=t.action)==null?void 0:s.toLowerCase().includes(a))||((r=t.entity_type)==null?void 0:r.toLowerCase().includes(a))||String(t.user_id).includes(a)})].sort((t,a)=>{const s=new Date(t.created_at).getTime(),r=new Date(a.created_at).getTime();return o==="desc"?r-s:s-r}),h=t=>({sale_create:"bg-green-100 text-green-700",sale_delete:"bg-red-100 text-red-700",user_create:"bg-blue-100 text-blue-700",user_update:"bg-yellow-100 text-yellow-700",user_delete:"bg-red-100 text-red-700",cash_open:"bg-green-100 text-green-700",cash_close:"bg-purple-100 text-purple-700",cash_withdraw:"bg-orange-100 text-orange-700",cash_deposit:"bg-teal-100 text-teal-700",settings_update:"bg-indigo-100 text-indigo-700"})[t]||"bg-gray-100 text-gray-700";return e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(y,{className:"h-6 w-6 text-[hsl(var(--primary))]"}),e.createElement("h1",{className:"text-2xl font-bold"},"Auditoría del Sistema")),e.createElement("div",{className:"flex gap-2 items-center"},e.createElement(E,{placeholder:"Buscar acción, entidad...",value:n,onChange:t=>p(t.target.value),icon:N,className:"w-64"}),e.createElement("button",{onClick:()=>x(o==="desc"?"asc":"desc"),className:"p-2 rounded-lg border border-[hsl(var(--border))] hover:bg-[hsl(var(--muted))]",title:"Cambiar orden"},e.createElement(S,{className:"h-4 w-4"})))),e.createElement(b,{className:"p-0 overflow-hidden"},u?e.createElement("div",{className:"p-8 text-center text-[hsl(var(--muted-foreground))]"},"Cargando registros..."):d.length===0?e.createElement("div",{className:"p-8 text-center text-[hsl(var(--muted-foreground))]"},"No hay registros de auditoría"):e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"w-full text-sm"},e.createElement("thead",{className:"bg-[hsl(var(--muted))]"},e.createElement("tr",null,e.createElement("th",{className:"text-left px-6 py-3 font-medium"},"Fecha/Hora"),e.createElement("th",{className:"text-left px-6 py-3 font-medium"},"Acción"),e.createElement("th",{className:"text-left px-6 py-3 font-medium"},"Entidad"),e.createElement("th",{className:"text-left px-6 py-3 font-medium"},"Usuario"),e.createElement("th",{className:"text-left px-6 py-3 font-medium"},"Detalles"))),e.createElement("tbody",{className:"divide-y divide-[hsl(var(--border))]"},d.slice(0,100).map(t=>e.createElement("tr",{key:t.id,className:"hover:bg-[hsl(var(--muted))/0.5]"},e.createElement("td",{className:"px-6 py-3 font-mono text-xs text-[hsl(var(--muted-foreground))]"},new Date(t.created_at).toLocaleString()),e.createElement("td",{className:"px-6 py-3"},e.createElement("span",{className:`inline-block px-2 py-0.5 text-xs font-semibold rounded-full ${h(t.action)}`},t.action)),e.createElement("td",{className:"px-6 py-3 text-[hsl(var(--muted-foreground))]"},t.entity_type," #",t.entity_id),e.createElement("td",{className:"px-6 py-3"},e.createElement("span",{className:"inline-flex items-center gap-1"},e.createElement(v,{className:"h-3 w-3"}),t.user_id)),e.createElement("td",{className:"px-6 py-3 text-xs text-[hsl(var(--muted-foreground))] max-w-xs truncate"},t.details?JSON.stringify(JSON.parse(t.details)):"-"))))))),e.createElement("p",{className:"text-xs text-[hsl(var(--muted-foreground))] text-center"},"Mostrando los últimos 100 registros"))};export{A as default};
